<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <title>デート登録 - マッチングアプリ管理</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="style.css">
    <!-- Supabase client library and initialization -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="supabaseClient.js"></script>
    <script defer src="events.js"></script>
  </head>
  <body>
    <header>
      <h1>デート登録</h1>
    </header>
    <nav class="main-nav">
      <a href="index.html">ホーム</a>
      <a href="profiles.html">プロフィール一覧</a>
      <a href="events.html" class="active">デート登録</a>
      <a href="calendar.html">戦歴</a>
      <a href="account.html">アカウント</a>
    </nav>
    <main>
      <section>
        <h2>予定を追加</h2>
        <form id="event-form">
          <!-- 編集時に利用するIDを格納する隠しフィールド -->
          <input type="hidden" id="eventId" value="">
          <label>相手:
            <select id="profileSelect"></select>
          </label>
          <label>日付:
            <input type="date" id="eventDate" required>
          </label>
          <!-- 感想の入力は編集モードのみで表示 -->
          <div id="commentField" style="display:none;">
            <label>感想:
              <input type="text" id="eventNote" placeholder="デートの感想を入力">
            </label>
          </div>
          <button type="submit" id="eventSubmitBtn">追加</button>
          <!-- 編集モードを知らせるインジケーター -->
          <div id="editingIndicator" style="display:none; color: var(--text); font-weight:bold; margin-top:0.5rem;">編集中</div>
        </form>
      </section>
      <section>
        <h2>登録済みのデート</h2>
        <!-- ラベル行を削除し、ボディのみで表示 -->
        <table id="events-table">
          <tbody>
            <!-- Events list will render here -->
          </tbody>
        </table>
      </section>
    </main>
    <!-- 右下に固定表示するログアウトボタン -->
    <a href="#" class="logout-bottom" onclick="logout()">ログアウト</a>
    <footer>
      <p>&copy;2026 マッチングアプリ管理</p>
    </footer>
  </body>
</html>